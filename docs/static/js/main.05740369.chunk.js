(this.webpackJsonpvnqa=this.webpackJsonpvnqa||[]).push([[0],{23:function(e,t,a){e.exports=a(67)},28:function(e,t,a){a(29),a(30)},29:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),i=window.dfd,l=i.Series,s=i.DataFrame,c=function(){function e(t,a){Object(n.a)(this,e),this.index=t.index,this.series=[];for(var r=0,i=t.index.length;r<i;)++r<a?this.series.push(NaN):this.series.push(t.iloc(["".concat(r-a,":").concat(r)]))}return Object(r.a)(e,[{key:"apply",value:function(e){return new l(this.series.map((function(t){return t&&e(t)})),{index:this.index})}}]),e}();l.prototype.rolling=function(e){return new c(this,e)};var o=function(){function e(t,a){Object(n.a)(this,e),this.index=t.index,this.columns=t.columns,this.dtypes=t.dtypes,this.df=[];for(var r=0,i=t.index.length;r<i;)++r<a?this.df.push(NaN):this.df.push(t.iloc({rows:["".concat(r-a,":").concat(r)]}))}return Object(r.a)(e,[{key:"apply",value:function(e){var t=this.columns.map((function(){return NaN}));return new s(this.df.map((function(a){return a?e(a):t})),{index:this.index,columns:this.columns,dtypes:this.dtypes})}}]),e}();s.prototype.rolling=function(e){return new o(this,e)}},30:function(e,t){window.dfd.Series.prototype.dropnall=function(e){for(var t=this.values,a=this.index,n=[],r=[],i=0,l=t.length;i<l;i++){var s=t[i];isNaN(s)||null===s||void 0===s||(n.push(s),r.push(a[i]))}if(e.inplace)return this.$setValues(n,!1),this.$setIndex(r),this;var c=this.copy();return c.$setValues(n,!1),c.$setIndex(r),c}},67:function(e,t,a){"use strict";a.r(t);var n,r,i,l=a(7),s=a(1),c=a(2),o=a(4),u=a(3),d=a(5),m=a(0),p=a.n(m),h=a(9),v=a.n(h),f=(a(28),window.wp);function g(e){return e&&"aicafe_one_logged_out"===e.code?window.location.reload():e}window.wp=void 0,f.role||(window.location.href=f.url||"https://aicafe.one/vnqa",exit());var b={arrayMerge:function(e,t){return t}};function y(){return n?new Promise((function(e){return e(n)})):(r||(r=(e="aicafe/v1/app/vnqa",fetch("".concat(f.api).concat(e).concat(-1===e.indexOf("?")?"?":"&","_wpnonce=").concat(f.nonce)).then((function(e){return e.json()})).then(g)).then((function(e){return n=Array.isArray(e)?{}:e})).catch((function(){return n={}}))),r);var e}function E(e){return n=window.deepmerge(n,e,b),i&&clearTimeout(i),i=setTimeout((function(){return e="aicafe/v1/app/vnqa",t=n,fetch("".concat(f.api).concat(e).concat(-1===e.indexOf("?")?"?":"&","_wpnonce=").concat(f.nonce),{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then(g);var e,t}),9e3),n}var w=!window.benchmark,x=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.lazy&&clearTimeout(this.lazy)}},{key:"setStateLazy",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;this.lazy&&clearTimeout(this.lazy),this.lazyState=this.lazyState?Object.assign(this.lazyState,e):e,this.lazy=setTimeout((function(){t.setState(t.lazyState),t.lazyState=!1}),a)}},{key:"getSettings",value:function(e,t){w&&y().then((function(a){return t(e?a[e]:a)}))}},{key:"getSettingsSync",value:function(e){return w&&(e?n&&n[e]:n)}},{key:"saveSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w&&E(e)}}]),t}(p.a.Component),k=window.dfd.DataFrame,N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={ticker:"",window:20},a.getSettingsSync()?(a.state.ticker=a.getSettingsSync(a.getKey())||a.state.ticker,a.state.window=a.getSettingsSync("window")||a.state.window):a.getSettings(!1,(function(e){if(a.props.df instanceof k){var t=e[a.getKey()];t&&t!==a.state.ticker&&a.setState({ticker:t})}e.window&&e.window!==a.state.window&&a.setState({window:e.window})})),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getKey",value:function(){return this.props.df.hasOwnProperty("VNINDEX")?"idx":"ticker"}},{key:"changeTicker",value:function(e){this.state.ticker!==e&&(this.saveSettings(Object(l.a)({},this.getKey(),e)),this.setState({ticker:e}))}},{key:"changeWindow",value:function(e){e=(e=parseInt(e.target.value))>1?e:this.state.window,this.saveSettings({window:e}),this.setState({window:e})}}]),t}(x),j=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.df,n=e.columns;n||(n=a.columns);for(var r=[{x:a[n[0]].index,y:a[n[0]].values,name:n[0]}],i=[["xy"]],l=1;l<n.length;l++)r.push({x:a[n[l]].index,y:a[n[l]].values,name:n[l],xaxis:"x",yaxis:"y".concat(l+1)}),i.push(["xy".concat(l+1)]);window.Plotly.newPlot(t,r,{xaxis:{showspikes:!0,spikemode:"toaxis+across+marker",spikesnap:"cursor"},yaxis:{type:"log"},grid:{rows:n.length,columns:1,subplots:i},margin:{l:40,r:8,b:32,t:40,pad:0},showlegend:!1})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return p.a.createElement("div",{id:this.props.id})}}]),t}(p.a.Component),O=a(11),S=a(22),C=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=Object(O.a)({},this.props);return e.options=e.options.map((function(t){return e.value===t?(e.value={value:t,label:t},e.value):{value:t,label:t}})),p.a.createElement(S.a,e)}}]),t}(p.a.Component),F=window.dfd.DataFrame,M=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"volatility",value:function(e){var t=this.props.df,a=e.ticker,n=e.window;t instanceof F&&(a&&t.hasOwnProperty(a)||(a=t.columns[0],e.ticker=a),t=t[a]),t.dropnall({inplace:!0});var r=t.apply(Math.log);(t=new F(Object(l.a)({},t.columns[0],t.values),{index:t.index})).addColumn({values:r.sub([NaN].concat(r.values.slice(0,-1))),column:"returns",inplace:!0});var i=Math.sqrt(252);return t.addColumn({values:t.returns.rolling(n).apply((function(e){return e.std()*i})),column:"volatility",inplace:!0}),e.df=t,e}},{key:"render",value:function(){var e=this,t=this.volatility(this.state);return p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header"},"\u0110\u1ed9 bi\u1ebfn \u0111\u1ed9ng",this.props.df instanceof F&&p.a.createElement(p.a.Fragment,null,"\xa0c\u1ee7a",p.a.createElement(C,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:t.ticker||this.props.df.columns[0],options:this.props.df.columns})),"\xa0trong",p.a.createElement("input",{className:"d-inline-flex ms-2 form-control",style:{width:"70px"},type:"number",value:t.window,onChange:function(t){return e.changeWindow(t)}}),"\xa0ng\xe0y"),p.a.createElement("div",{className:"card-body"},t.df&&p.a.createElement(j,{id:this.props.id,df:t.df})))}}]),t}(N),P=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id;e.sf.plot(t).hist({layout:Object(O.a)({margin:{l:40,r:8,b:32,t:100,pad:0}},this.props)})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return p.a.createElement("div",{id:this.props.id})}}]),t}(p.a.Component),D=window.jStat,T=window.dfd.DataFrame;var q=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"returns",value:function(e){var t=this.props.df,a=e.ticker||this.state.ticker;t instanceof T&&(a&&t.hasOwnProperty(a)||(a=t.columns[0],e.ticker=a),t=t[a]),t.dropnall({inplace:!0});var n=t.apply(Math.log);return e.df=t,e.returns=n.iloc(["1:"]).sub(n.values.slice(0,-1)),e}},{key:"render",value:function(){var e=this,t=this.returns(this.state),a=t.returns,n=t.df,r=t.ticker;return p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header"},"L\u1ee3i nhu\u1eadn",this.props.df instanceof T&&p.a.createElement(p.a.Fragment,null,"\xa0c\u1ee7a",p.a.createElement(C,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:r||this.props.df.columns[0],options:this.props.df.columns}))),a?p.a.createElement("div",{className:"card-body row"},p.a.createElement("div",{className:"col-md-6 mt-4"},p.a.createElement("table",{className:"table table-borderless table-striped table-hover"},p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,"T\u1eeb ng\xe0y"),p.a.createElement("td",null,n.index[0])),p.a.createElement("tr",null,p.a.createElement("td",null,"\u0110\u1ebfn ng\xe0y"),p.a.createElement("td",null,n.index[n.index.length-1])),p.a.createElement("tr",null,p.a.createElement("td",null,"L\u1ee3i nhu\u1eadn trung b\xecnh n\u0103m"),p.a.createElement("td",null,(25200*a.mean()).toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"L\u1ee3i nhu\u1eadn g\u1ed9p"),p.a.createElement("td",null,(100*(n.values[n.values.length-1]-n.values[0])/n.values[0]).toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"Bi\u1ebfn \u0111\u1ed9ng trung b\xecnh n\u0103m"),p.a.createElement("td",null,(a.std()*Math.sqrt(252e4)).toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"T\u1ef7 l\u1ec7 Sharpe"),p.a.createElement("td",null,(a.mean()/a.std()*Math.sqrt(252)).toFixed(2))),p.a.createElement("tr",null,p.a.createElement("td",null,"Max Drawdown"),p.a.createElement("td",null,function(e){for(var t=0,a=0,n=0,r=e.length;n<r;n++){var i=e[n];if(i<a){var l=100*(a-i)/a;l>t&&(t=l)}else a=i}return t}(n.values).toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"Max Drawdown Duration"),p.a.createElement("td",null,function(e){for(var t,a=0,n=0,r=0,i=e.length;r<i;r++){var l=e[r];l<n?t++:(t>a&&(a=t),n=l,t=0)}return a}(n.values)," ng\xe0y")),p.a.createElement("tr",null,p.a.createElement("td",null,"\u0110\u1ed9 l\u1ec7ch (Skew)"),p.a.createElement("td",null,D.skewness(a.values).toFixed(2))),p.a.createElement("tr",null,p.a.createElement("td",null,"\u0110\u1ed9 nh\u1ecdn (Kurtosis)"),p.a.createElement("td",null,D.kurtosis(a.values).toFixed(2))),p.a.createElement("tr",null,p.a.createElement("td",null,"Gi\xe1 tr\u1ecb ch\u1ecbu r\u1ee7i ro h\xe0ng ng\xe0y (VAR 95%)"),p.a.createElement("td",null,(100*D.percentile(a.values,.05)).toFixed(2),"%"))))),p.a.createElement("div",{className:"col-md-6"},p.a.createElement(P,{id:this.props.id,sf:a,title:"Ph\xe2n b\u1ed1 l\u1ee3i nhu\u1eadn"}))):"")}}]),t}(N),z=a(18),L=a.n(z),B=(a(56),a(13)),I=a.n(B),A=a(19),H=a.n(A),V=a(6);function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(r){function i(){return Object(s.a)(this,i),Object(o.a)(this,Object(u.a)(i).apply(this,arguments))}return Object(d.a)(i,r),Object(c.a)(i,[{key:"render",value:function(){var r=new V.PivotData(this.props),i=r.getRowKeys(),l=r.getColKeys(),s=n?l:i;0===s.length&&s.push([]);var c=n?i:l;0===c.length&&c.push([]);var o=this.props.aggregatorName,u=this.props.aggregators[o]([])().numInputs||0;0!==u&&(o+=" of ".concat(this.props.vals.slice(0,u).join(", ")));var d=s.map((function(e){var a=[],i=[],l=!0,s=!1,u=void 0;try{for(var d,m=c[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var p=d.value,h=parseFloat(r.getAggregator(n?p:e,n?e:p).value());a.push(isFinite(h)?h:null),i.push(p.join("-")||" ")}}catch(f){s=!0,u=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw u}}var v={name:e.join("-")||o};return"pie"===t.type?(v.values=a,v.labels=i.length>1?i:[o]):(v.x=n?a:i,v.y=n?i:a),Object.assign(v,t)})),m=o,h=n?this.props.rows.join("-"):this.props.cols.join("-"),v=n?this.props.cols.join("-"):this.props.rows.join("-");""!==h&&(m+=" vs ".concat(h)),""!==v&&(m+=" by ".concat(v));var f={title:m,hovermode:"closest",width:window.innerWidth*(window.innerWidth<768?.7:.6)-96,height:.6*window.innerHeight};if("pie"===t.type){var g=Math.ceil(Math.sqrt(d.length)),b=Math.ceil(d.length/g);f.grid={columns:g,rows:b},d.forEach((function(e,t){e.domain={row:Math.floor(t/g),column:t-g*Math.floor(t/g)},d.length>1&&(e.title=e.name)})),1===d[0].labels.length&&(f.showlegend=!1)}else f.xaxis={title:n?o:null,automargin:!0},f.yaxis={title:n?null:o,automargin:!0};return p.a.createElement(e,{data:d,layout:Object.assign(f,a,this.props.plotlyOptions),config:this.props.plotlyConfig,onUpdate:this.props.onRendererUpdate})}}]),i}(p.a.PureComponent);return r.defaultProps=Object.assign({},V.PivotData.defaultProps,{plotlyOptions:{},plotlyConfig:{}}),r}function K(e){var t=function(t){function a(){return Object(s.a)(this,a),Object(o.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,t),Object(c.a)(a,[{key:"render",value:function(){var t=new V.PivotData(this.props),a=t.getRowKeys(),n=t.getColKeys();0===a.length&&a.push([]),0===n.length&&n.push([]);var r={x:[],y:[],text:[],type:"scatter",mode:"markers"};a.forEach((function(e){n.forEach((function(a){var n=t.getAggregator(e,a).value();null!==n&&(r.x.push(a.join("-")),r.y.push(e.join("-")),r.text.push(n))}))}));var i={title:this.props.rows.join("-")+" vs "+this.props.cols.join("-"),hovermode:"closest",xaxis:{title:this.props.cols.join("-"),automargin:!0},yaxis:{title:this.props.rows.join("-"),automargin:!0},width:window.innerWidth*(window.innerWidth<768?.7:.6)-96,height:.6*window.innerHeight};return p.a.createElement(e,{data:[r],layout:Object.assign(i,this.props.plotlyOptions),config:this.props.plotlyConfig,onUpdate:this.props.onRendererUpdate})}}]),a}(p.a.PureComponent);return t.defaultProps=Object.assign({},V.PivotData.defaultProps,{plotlyOptions:{},plotlyConfig:{}}),t}var U=H()(window.Plotly);function $(e){var t=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return function(e){if(e>0){var n=255-Math.round(255*e/a);return{backgroundColor:"rgb("+n+",255,"+n+")"}}if(e<0){var r=255-Math.round(255*e/t);return{backgroundColor:"rgb(255,"+r+","+r+")"}}return{}}}var _,W=Object.assign({},I.a,{"Grouped Column Chart":R(_=U,{type:"bar"},{barmode:"group"}),"Stacked Column Chart":R(_,{type:"bar"},{barmode:"relative"}),"Grouped Bar Chart":R(_,{type:"bar",orientation:"h"},{barmode:"group"},!0),"Stacked Bar Chart":R(_,{type:"bar",orientation:"h"},{barmode:"relative"},!0),"Line Chart":R(_),"Dot Chart":R(_,{mode:"markers"},{},!0),"Area Chart":R(_,{stackgroup:1}),"Scatter Chart":K(_),"Multiple Pie Chart":R(_,{type:"pie",scalegroup:1,hoverinfo:"label+value",textinfo:"none"},{},!0)});function G(e){return isNaN(e)||!isFinite(e)?"":Math.abs(e)>=1e8?e.toExponential(2):(e<0?"-":"")+Math.floor(Math.abs(e.toFixed(2))).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+(Math.abs(e)%1).toFixed(2).replace(/0*$/,"").replace(/\.$/,"").substr(1)}function J(e){return G(Math.exp(e))}function X(e){return G(100*Math.expm1(e))}V.aggregators["Exp Sum"]=V.aggregatorTemplates.sum(J),V.aggregators["Exp Avg"]=V.aggregatorTemplates.average(J),V.aggregators["Exp Stdev"]=V.aggregatorTemplates.stdev(1,J),V.aggregators["Exp % Sum"]=V.aggregatorTemplates.sum(X),V.aggregators["Exp % Avg"]=V.aggregatorTemplates.average(X),V.aggregators["Exp % Stdev"]=V.aggregatorTemplates.stdev(1,X);var Q=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement(L.a,Object.assign({onChange:function(t){return e.setState(t)},renderers:W,tableColorScaleGenerator:$},this.props,this.state,{data:this.props.data}))}}]),t}(p.a.Component),Y=window.dfd,Z=Y.DataFrame,ee=Y.Series,te=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"seasonal",value:function(e){var t=this.props.df,a=e.ticker;t instanceof Z&&(a&&t.hasOwnProperty(a)||(a=t.columns[0],e.ticker=a),t=t[a]),t.dropnall({inplace:!0});var n=t.apply(Math.log);t=new Z({returns:n.iloc(["1:"]).sub(n.values.slice(0,-1)).values},{index:t.index.slice(1)});var r=new ee(t.index).dt;return t.addColumn({values:r.year(),column:"year",inplace:!0}),t.addColumn({values:r.month().add(1),column:"month",inplace:!0}),t.addColumn({values:r.day().add(1),column:"day of week",inplace:!0}),t.addColumn({values:r.monthday(),column:"day of month",inplace:!0}),e.data=[t.columns].concat(t.values),e}},{key:"render",value:function(){var e=this,t=this.seasonal(this.state);return p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header",style:{zIndex:2}},"Chu k\u1ef3 l\u1ee3i nhu\u1eadn",this.props.df instanceof Z&&p.a.createElement(p.a.Fragment,null,"\xa0c\u1ee7a",p.a.createElement(C,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:t.ticker||this.props.df.columns[0],options:this.props.df.columns}))),t.data&&p.a.createElement("div",{className:"card-body"},p.a.createElement(Q,{data:t.data,aggregatorName:"Exp % Sum",vals:["returns"],rows:["year"],cols:["month"],rendererName:"Table Heatmap"})))}}]),t}(N),ae=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.rets;window.Plotly.newPlot(t,a.columns.map((function(e){return{y:a[e].values,type:"box",name:e}})),{margin:{l:40,r:8,b:32,t:40,pad:0}}),a.cumsum().apply_map(Math.exp).plot(t+"Curve").line({layout:{yaxis:{type:"log"},margin:{l:40,r:8,b:32,t:40,pad:0}}})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header"},"Kho\u1ea3ng l\u1ee3i nhu\u1eadn c\xe1c c\u1ed5 phi\u1ebfu th\xe0nh ph\u1ea7n"),p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{id:this.props.id}))),p.a.createElement("div",{className:"card mt-3"},p.a.createElement("div",{className:"card-header"},"\u0110\u01b0\u1eddng cong l\u1ee3i nhu\u1eadn c\xe1c c\u1ed5 phi\u1ebfu th\xe0nh ph\u1ea7n"),p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{id:this.props.id+"Curve"}))))}}]),t}(p.a.Component),ne=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.weights;window.Plotly.newPlot(t,a.columns.map((function(e){return{x:a.index,y:a[e].values,stackgroup:"one",name:e}})),{margin:{l:40,r:8,b:32,t:40,pad:0}})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header"},"T\u1ef7 tr\u1ecdng t\u1eebng c\u1ed5 phi\u1ebfu th\xe0nh ph\u1ea7n"),p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{id:this.props.id})))}}]),t}(p.a.Component);function re(e){return e<0?"-":""}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e?re(e)+Math.floor(Math.abs(e)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,t):""}var le=a(20),se=a.n(le),ce=a(21),oe=a.n(ce);function ue(e){return ue[e]?new Promise((function(t){t(ue[e])})):fetch("https://vnqa.aicafe.one/".concat(e,".zip")).then((function(e){return e.blob()})).then(oe.a.loadAsync).then((function(t){return t.file(e+".csv").async("string").then((function(t){return new Promise((function(a){se.a.parse(t,{skipEmptyLines:!0,worker:!0,complete:function(t){var n=t.data,r=n.shift().slice(1),i=n.map((function(e){return"".concat(+e.shift()+2e7).replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3")})),l=new window.dfd.DataFrame(n.map((function(e){return e.map((function(e){return+e||NaN}))})),{index:i,columns:r,config:{lowMemoryMode:!0}});ue[e]=l,a(l)}})}))}))})).catch((function(e){return console.log(e)}))}function de(e,t,a){var n=t.index,r=t.values,i=n.indexOf(e.index[0]);i=-1===i?0:i;var l=e.values[0][0],s=r[i],c=l,o=[l];return e.index.slice(1).forEach((function(e){var t=n.indexOf(e,i);-1!==t&&(c=r[t]/s*l,i=t+1),o.push(c)})),e.addColumn({column:a||t.columns[0],values:o})}var me=window.dfd.DataFrame,pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={ticker:""},ue.indices&&(a.state.df=ue.indices),a.getSettingsSync()?a.state.ticker=a.getSettingsSync("idx")||"":a.getSettings("idx",(function(e){return e&&e!==a.state.ticker&&a.setState({ticker:e})})),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"changeTicker",value:function(e){this.state.ticker!==e&&(this.saveSettings({idx:e}),this.setState({ticker:e}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.theory,n=t.ec,r=t.id;n=de(new me({"M\xf4 ph\u1ecfng":n.values},{index:n.index}),a,"L\xfd thuy\u1ebft"),window.benchmark?n=de(n,window.benchmark):this.state.df?n=de(n,this.state.df[this.state.ticker||this.state.df.columns[0]]):ue("indices").then((function(t){return e.setState({df:t})})),n.plot(r).line({layout:{yaxis:{type:"log"},margin:{l:40,r:8,b:32,t:40,pad:0}}})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"card my-3"},p.a.createElement("div",{className:"card-header"},"\u0110\u01b0\u1eddng cong v\u1ed1n c\u1ee7a danh m\u1ee5c",this.state.df instanceof me&&p.a.createElement(p.a.Fragment,null,"\xa0so v\u1edbi",p.a.createElement(C,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:this.state.ticker||this.state.df.columns[0],options:this.state.df.columns}))),p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{id:this.props.id}))))}}]),t}(x),he=a(14);function ve(e){var t=e.columns,a=e.data,n=Object(he.useTable)({columns:t,data:a,initialState:{pageIndex:0}},he.usePagination),r=n.getTableProps,i=n.getTableBodyProps,l=n.headerGroups,s=n.prepareRow,c=n.page,o=n.canPreviousPage,u=n.canNextPage,d=n.pageCount,m=n.gotoPage,h=n.nextPage,v=n.previousPage,f=n.setPageSize,g=n.state,b=g.pageIndex,y=g.pageSize;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{style:{overflowX:"scroll"}},p.a.createElement("table",r({className:"table table-bordered table-striped table-hover text-nowrap mb-0"}),p.a.createElement("thead",{className:"text-center"},l.map((function(e){return p.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return p.a.createElement("th",e.getHeaderProps(),e.render("Header"))})))}))),p.a.createElement("tbody",i(),c.map((function(e,t){return s(e),p.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return p.a.createElement("td",e.getCellProps({className:e.column.className}),e.render("Cell"))})))}))))),p.a.createElement("div",{className:"container"},p.a.createElement("div",{className:"row my-2"},p.a.createElement("div",{className:"pagination col-sm-4"},p.a.createElement(C,{className:"d-inline-flex",onChange:function(e){return f(Number(e.value))},value:y,options:[10,20,30,50,100]}),p.a.createElement("div",{className:"col-auto col-form-label"},"\xa0d\xf2ng/trang")),p.a.createElement("div",{className:"pagination col-sm-4 justify-content-center"},p.a.createElement("div",{className:"col-auto px-0"},p.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",value:b+1,onChange:function(e){var t=e.target.value?Number(e.target.value):1;t=Math.max(1,Math.min(d,t)),m(t-1)}})),p.a.createElement("div",{className:"col-auto col-form-label"},"\xa0/ ",d)),p.a.createElement("div",{className:"pagination col-sm-4 justify-content-end",style:{paddingRight:0}},p.a.createElement("div",{onClick:function(){return m(0)},className:o?"page-item":"page-item disabled"},p.a.createElement("div",{role:"button",className:"page-link"},"<<")),p.a.createElement("div",{onClick:function(){return v()},className:o?"page-item":"page-item disabled"},p.a.createElement("div",{role:"button",className:"page-link"},"<")),p.a.createElement("div",{onClick:function(){return h()},className:u?"page-item":"page-item disabled"},p.a.createElement("div",{role:"button",className:"page-link"},">")),p.a.createElement("div",{onClick:function(){return m(d-1)},className:u?"page-item":"page-item disabled"},p.a.createElement("div",{role:"button",className:"page-link"},">>"))))))}var fe=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.history,t=[{Header:"Ng\xe0y",accessor:"date"},{Header:"T\xe0i s\u1ea3n r\xf2ng",accessor:"nav",className:"text-end"}];return e.tickers.forEach((function(e){t.push({Header:e,columns:[{Header:"KL",accessor:e,className:"text-end"},{Header:"Gi\xe1 tr\u1ecb",accessor:e+"_v",className:"text-end"}]})})),p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"card my-3"},p.a.createElement("div",{className:"card-header"},"L\u1ecbch s\u1eed n\u1eafm gi\u1eef c\u1ee7a danh m\u1ee5c"),p.a.createElement("div",{className:"card-body"},p.a.createElement(ve,{columns:t,data:e}))))}}]),t}(p.a.Component),ge=window.dfd.Series,be=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state=Object.assign({capital:1e3,reinvest:!0,buyFee:.15,sellFee:.25},a.getSettingsSync("simulation")||{}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"simulate",value:function(e){for(var t=this.props.weights.dropna(0),a=this.props.prices,n=[],r=[],i=1e3*e.capital,l=t.columns,s=new Array(l.length).fill(0),c=function(c,o){var u=t.index[c],d=a.values[a.index.indexOf(u,c)],m=s.reduce((function(e,t,a){return e+t*d[a]}),0)+i,p=new Date(u);if(!e.freq||1===e.freq&&(e.dow||0)+1===p.getDay()||2===e.freq&&(e.day||0)+1===p.getDate()||3===e.freq&&!(c%(e.period<1?1:Math.floor(e.period)))){var h=s,v=e.reinvest?m:1e3*e.capital;s=t.values[c].map((function(e,t){var a=e*v/d[t];return 100*Math.floor(a/100)})),i=m-s.reduce((function(t,a,n){var r=a-h[n];return t+a*d[n]+r*d[n]*(r>0?e.buyFee:-e.sellFee)/100}),0)}for(var f={date:u,nav:ie(m*=1e3)},g=l.length-1;g>=0;g--){var b=l[g];f[b]=ie(s[g]),f[b+"_v"]=ie(s[g]*d[g]*1e3)}n.unshift(f),r.push(m)},o=0,u=t.index.length;o<u;o++)c(o);return n.tickers=l,e.simulation=n,e.ec=new ge(r,{index:t.index}),e}},{key:"changeCapital",value:function(e){e=(e=parseInt(e.target.value))>0?e:this.state.capital,this.saveSettings({simulation:{capital:e}}),this.setStateLazy({capital:e})}},{key:"changeBuyFee",value:function(e){(e=parseFloat(e.target.value)||0)!==this.state.buyFee&&(this.saveSettings({simulation:{buyFee:e}}),this.setStateLazy({buyFee:e}))}},{key:"changeSellFee",value:function(e){(e=parseFloat(e.target.value)||0)!==this.state.sellFee&&(this.saveSettings({simulation:{sellFee:e}}),this.setStateLazy({sellFee:e}))}},{key:"changeReinvest",value:function(e){this.setStateLazy({reinvest:e.target.checked})}},{key:"changeFreq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"freq";e=parseFloat(e.target.value)||0,this.saveSettings({simulation:Object(l.a)({},t,e)}),this.setStateLazy(Object(l.a)({},t,e))}},{key:"render",value:function(){var e=this;if(!this.state)return null;var t=this.simulate(this.state);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"px-3"},p.a.createElement("div",{className:"row mb-3"},p.a.createElement("div",{className:"col-auto"},p.a.createElement("label",{className:"col-form-label"},"V\u1edbi")),p.a.createElement("div",{className:"col-auto px-0"},p.a.createElement("input",{className:"form-control",style:{width:"100px"},type:"number",defaultValue:t.capital,onChange:function(t){return e.changeCapital(t)}})),p.a.createElement("div",{className:"col-auto"},p.a.createElement("label",{className:"col-form-label"},"(tri\u1ec7u) v\u1ed1n \u0111\u1ea7u t\u01b0 ban \u0111\u1ea7u,")),p.a.createElement("div",{className:"col-auto px-0 py-2"},p.a.createElement("input",{role:"button",className:"form-check-input",type:"checkbox",id:"reinvest",defaultChecked:t.reinvest,onChange:function(t){return e.changeReinvest(t)}})),p.a.createElement("div",{className:"col-auto"},p.a.createElement("label",{role:"button",className:"col-form-label",htmlFor:"reinvest"},"t\xe1i \u0111\u1ea7u t\u01b0.")),p.a.createElement("div",{className:"col-auto px-0"},p.a.createElement("label",{className:"col-form-label"},"Ph\xed v\xe0 thu\u1ebf\xa0")),p.a.createElement("div",{className:"col-auto px-0"},p.a.createElement("input",{className:"form-control",style:{width:"64px"},defaultValue:t.buyFee,onChange:function(t){return e.changeBuyFee(t)}})),p.a.createElement("div",{className:"col-auto px-0"},p.a.createElement("label",{className:"col-form-label"},"\xa0% khi mua, \xa0")),p.a.createElement("div",{className:"col-auto px-0"},p.a.createElement("input",{className:"form-control",style:{width:"64px"},defaultValue:t.sellFee,onChange:function(t){return e.changeSellFee(t)}})),p.a.createElement("div",{className:"col-auto px-0"},p.a.createElement("label",{className:"col-form-label"},"\xa0% khi b\xe1n.")),p.a.createElement("div",{className:"col-auto"},p.a.createElement("label",{className:"col-form-label"},"T\xe1i c\xe2n b\u1eb1ng danh m\u1ee5c")),p.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},p.a.createElement("select",{className:"form-select",defaultValue:t.freq,onChange:function(t){return e.changeFreq(t)}},p.a.createElement("option",{value:0},"h\xe0ng ng\xe0y"),p.a.createElement("option",{value:1},"h\xe0ng tu\u1ea7n"),p.a.createElement("option",{value:2},"h\xe0ng th\xe1ng"),p.a.createElement("option",{value:3},"sau m\u1ed7i"))),1===t.freq&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-auto"},p.a.createElement("label",{className:"col-form-label"},"v\xe0o")),p.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},p.a.createElement("select",{className:"form-select",defaultValue:t.dow,onChange:function(t){return e.changeFreq(t,"dow")}},p.a.createElement("option",{value:0},"th\u1ee9 hai"),p.a.createElement("option",{value:1},"th\u1ee9 ba"),p.a.createElement("option",{value:2},"th\u1ee9 t\u01b0"),p.a.createElement("option",{value:3},"th\u1ee9 n\u0103m"),p.a.createElement("option",{value:4},"th\u1ee9 s\xe1u")))),2===t.freq&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-auto"},p.a.createElement("label",{className:"col-form-label"},"v\xe0o ng\xe0y")),p.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},p.a.createElement("select",{className:"form-select",defaultValue:t.day,onChange:function(t){return e.changeFreq(t,"day")}},new Array(31).fill(0).map((function(e,t){return p.a.createElement("option",{value:t},t+1)}))))),3===t.freq&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col-auto"},p.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",defaultValue:t.period||1,onChange:function(t){return e.changeFreq(t,"period")}})),p.a.createElement("div",{className:"col-auto px-0"},p.a.createElement("label",{className:"col-form-label"},"ng\xe0y."))))),p.a.createElement(pe,{id:this.props.id+"Benchmark",theory:this.props.theory,ec:t.ec}),p.a.createElement(q,{id:this.props.id+"Rets",df:t.ec}),p.a.createElement(fe,{id:this.props.id+"History",history:t.simulation}))}}]),t}(x),ye=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={tab:window.tab},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,a=this.state.tab;if(window.tab=a,"rets"===a)e=p.a.createElement(q,{id:this.props.id+"Rets",df:this.props.ec});else if("ssn"===a)e=p.a.createElement(te,{id:this.props.id+"Ssn",df:this.props.ec});else if("box"===a){var n=this.props.ec.apply(Math.log);e=p.a.createElement(ae,{id:this.props.id+"Box",rets:this.props.rets.addColumn({column:"Danh m\u1ee5c",values:n.sub([0].concat(n.values.slice(0,-1)))})})}else"wi"===a?e=p.a.createElement(ne,{id:this.props.id+"Wi",weights:this.props.weights}):"si"===a?e=p.a.createElement(be,{id:this.props.id+"Si",theory:this.props.ec,weights:this.props.weights,prices:this.props.prices}):(a="vola",e=p.a.createElement(M,{id:this.props.id+"Vola",df:this.props.ec}));return p.a.createElement("div",null,p.a.createElement("ul",{className:"nav nav-tabs mb-3"},p.a.createElement("li",{className:"nav-item",onClick:function(){return"vola"===a||t.setState({tab:"vola"})}},p.a.createElement("button",{className:"vola"===a?"nav-link active":"nav-link"},"\u0110\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),p.a.createElement("li",{className:"nav-item",onClick:function(){return"rets"===a||t.setState({tab:"rets"})}},p.a.createElement("button",{className:"rets"===a?"nav-link active":"nav-link"},"L\u1ee3i nhu\u1eadn")),p.a.createElement("li",{className:"nav-item",onClick:function(){return"ssn"===a||t.setState({tab:"ssn"})}},p.a.createElement("button",{className:"ssn"===a?"nav-link active":"nav-link"},"Chu k\u1ef3 l\u1ee3i nhu\u1eadn")),this.props.rets&&p.a.createElement("li",{className:"nav-item",onClick:function(){return"box"===a||t.setState({tab:"box"})}},p.a.createElement("button",{className:"box"===a?"nav-link active":"nav-link"},"C\u1ed5 phi\u1ebfu th\xe0nh ph\u1ea7n")),this.props.weights&&p.a.createElement("li",{className:"nav-item",onClick:function(){return"wi"===a||t.setState({tab:"wi"})}},p.a.createElement("button",{className:"wi"===a?"nav-link active":"nav-link"},"T\u1ef7 tr\u1ecdng")),this.props.weights&&p.a.createElement("li",{className:"nav-item",onClick:function(){return"si"===a||t.setState({tab:"si"})}},p.a.createElement("button",{className:"si"===a?"nav-link active":"nav-link"},"M\xf4 ph\u1ecfng"))),e)}}]),t}(p.a.Component),Ee=window.dfd,we=Ee.Series,xe=Ee.DataFrame;function ke(e){return e.replace(/(^"|"$)/g,"")}function Ne(e){return+e}var je=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e));var n=document.getElementById("df").innerHTML.trim();"%(csv)s"===n&&(n="date,ec,ABC,DEF,ABC_,DEF_,BM\n2022-04-20,1,0.5,0.5,10,10,1\n2022-04-21,2,0.5,0.5,20,20,3\n2022-04-22,3,0.5,0.5,30,30,2");var r,i,c,d=[],m=[],p=[],h=[],v=[];return n.split(/\r?\n/).forEach((function(e){var t=e.split(",").map(ke);r?(d.push(t[0]),m.push(+t[1]),p.push(t.slice(2,i).map(Ne)),h.push(t.slice(i,i-1<<1).map(Ne)),v.push(+t[t.length-1])):(i=1+(t.length>>1),r=t.slice(2,i),c=t[t.length-1])})),m=new we(m,{index:d,config:{lowMemoryMode:!0}}),p=new xe(p,{index:d,columns:r,config:{lowMemoryMode:!0}}),h=new xe(h,{index:d,columns:r,config:{lowMemoryMode:!0}}),window.benchmark=new we(Object(l.a)({},c,v),{index:d,config:{lowMemoryMode:!0}}),a.state={ec:m,weights:p,prices:h},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state;return p.a.createElement(ye,{id:"eqw",ec:e.ec,weights:e.weights,prices:e.prices})}}]),t}(m.Component);v.a.render(p.a.createElement(je,null),document.getElementById("root"))}},[[23,1,2]]]);